<p>Soupault (<em>soup-oh</em>) is a tool that helps you create and manage static websites.</p>
<p>
It's best described as a robotic webmaster. Like a human webmaster, it understands HTML, but doesn't get tired of editing it.
You can tell it to do things like &ldquo;insert the HTML from <code>footer.html</code> after the last element in the page <code>&lt;body&gt;</code>&rdquo;.
</p>
<p>
Traditionally, there was a dichotomy between unlimited possibilities of handwritten Web 1.0 pages and convenience of &ldquo;cookie cutter&rdquo;
tools (CMSes and classic static site generators). People often had to add JavaScript to non-interactive pages if they wanted a good table of contents,
syntax highlighting and so on. Soupault removes that dichotomy: it can do all the DOM manipulation you could do with JavaScript, but the result
is a static page.
</p>
<p>It can generate complete pages from a &ldquo;theme&rdquo; and content files, automatically modify existing pages, and extract site metadata.</p>
<p>Soupault is...</p>
<ul>
  <li><a href="#html-aware">HTML-aware</a></li>
  <li><a href="#dependency-free">Dependency-free</a></li>
  <li><a href="#extensible">Extensible</a></li>
  <li><a href="#unix-way">UNIX-way</a></li>
</ul>
<p>
To get started, <a href="#downloads">download</a> and unpack a release archive. Then run <code>soupault --init</code> in an empty directory
to initialize a basic project, and then run <code>soupault</code> in that directory to build it. Generated pages will be in <code>build/</code>.
</p>

<h2 id="html-aware">HTML-aware</h2>
<p>
Most static site generators are essentially CMSes that generate all pages at once rather than on demand.
HTML is an opaque format to them: they can <em>generate</em> it using a template processor,
but they cannot <em>manipulate</em> it. This limits what you can do with them: for example, pages with a unique
design can only be included as static assets.
</p>
<p>
Soupault makes HTML a first-class citizen. Like web browsers, it can parse HTML and manipulate the element tree of the page.
However, it saves the result in a static page rather than displays it on screen.
</p>
<p>
This allows features like <a href="/reference-manual/#footnotes-widget">footnotes</a> with automatic links in both directions,
and even an option to <a href="/reference-manual/#delete-element">delete unwanted HTML elements</a>.
It also means all features work the same regardless of the content file format.<fn id="format-independent">In some other projects
you may see a situation when both Markdown and reStructuredText are technically supported, but tables of contents or footnotes only work
for Markdown because it's an opaque feature of their Markdown processor. There's no such problems in soupault.</fn>
</p>
<p>
You can also use soupault as a post-processor for an <em>existing</em> website, whether hand-written or generated by another tool.
</p>
<p>
It also helps you avoid unnecessary client-side JavaScript and create pages <a href="https://jeffhuang.com/designed_to_last/">designed to last</a>.
</p>

<h2 id="dependency-free">Dependency-free</h2>
<p>
Soupault is available as a single, statically linked executable (~16&nbsp;MB) for Linux, macOS (x86_64 only, so far), and Microsoft Windows (64-bit).
</p>
<p>
It's easy to install on your own computer or incorporate in a <a href="/tips-and-tricks/deployment/">CI script</a>. Just download and unpack a release
archive and it's ready to use.
</p>
<p>This means you can keep using soupault indefinitely even if it becomes unmaintained.</p>
<p>
Even though you are never forced to upgrade to a new version, soupault tries to make upgrading as easy as possible too.
The maintainer uses <a href="https://semver.org/">semantic versioning</a>, properly marks backwards-incompatible releases
with a major version change, and documents breaking changes.
</p>

<h2 id="unix-way">UNIX-way</h2>
<p>Soupault aims to do one thing: manipulate HTML element trees offline, and do it well.</p>
<p>
It purposely doesn't include things like a development web server, a SASS compiler, or an image processing library.
It avoids bloating the executable with built-in functionality that only some users will want, and that some users will want
to work <em>different from the built-in</em>.
</p>
<p>
Instead, it makes it easy to plug your own tools into the pipeline. Statically linked and dependency-free doesn't have to mean &ldquo;not extensible&rdquo;.
Soupault is extensible in several ways.
</p>

<h2 id="extensible">Extensible</h2>
<h3>Plugins</h3>
<p>
Soupault comes with an embedded Lua interpreter, so it can be extended with <a href="/plugins">plugins</a>.
Its <a href="/reference-manual/#plugin-api">API</a> is similar to the JavaScript DOM API and allows you to manipulate pages in arbitrary ways.
</p>
<p>
There are many things plugins can do. They can expand custom elements to real HTML (think a static version of <a href="https://developer.mozilla.org/en-US/docs/Web/Web_Components">web components</a>,
or shortcodes on steroids). They can also call external programs, read data from files, and modify the entire page: not just the content, but also the HTML coming from the page template.
</p>

<h3>Page preprocessors</h3>
<p>
Soupault only supports HTML internally, but it allows you to bring your own <a href="/reference-manual/#page-preprocessors">page preprocessors</a>.
</p>
<p>
Thus it's possible to write pages in <em>any</em> format. Want to use CommonMark? Install <a href="https://github.com/commonmark/cmark">cmark</a>
and add this to your <code>soupault.conf</code>:
</p>
<pre class="language-toml">
[preprocessors]
  md = "cmark --unsafe --smart"
</pre>
<p>Now all Markdown pages with <code>.md</code> extensions will be automatically converted to HTML by piping them through <code>cmark --unsafe --smart</code> command.</p>
<p>
You can use any external program as a page preprocessor, and you can have as many preprocessors as you want. Whether you are a fan of
<a href="https://pandoc.org/">Pandoc</a>, <a href="https://asciidoctor.org">AsciiDoctor</a> or something elseâ€”as long as it can read from standard input
and write HTML to standard output, you can use it as a preprocessor.
</p>

<h3>Element preprocessors</h3>
<p>
It's also possible to pipe HTML <em>elements</em> through external programs.
Those programs have access to the element tag names and attributes via environment variables.
</p>
<p>
This is how you can add syntax highlighting to code samples in <code>&lt;pre class="language-something"&gt;</code> elements.
Assuming you have <a href="http://www.andre-simon.de/doku/highlight/en/highlight.php">highlight</a> and <a href="https://en.wikipedia.org/wiki/Sed">sed</a> installed:
</p>
<pre class="language-toml">
# Runs the content of &lt;* class="language-*"&gt; elements through a syntax highlighter
[widgets.syntax-highlighting]
  widget = "preprocess_element"
  selector = '*[class^="language-"]'
  command = 'highlight -O html -f --inline-css --syntax=$(echo $ATTR_CLASS | sed -e "s/language-//")'
  action = "replace_content"
</pre>

<h3>Content model</h3>
<p>
Soupault allows you to define your own content model. There is no front matter, metadata is <a href="/reference-manual/#metadata-extraction-and-rendering">extracted directly from HTML</a> using
CSS selectors, similar to how <a href="https://microformats.org/">microformats</a> and web scrapers work.
</p>
<p>For example, this is how you can say &ldquo;use <code>&lt;h1 id="post-title"&gt;</code> for the post title if a page has one, else just use <code>&lt;h1&gt;</code>:</p>
<pre class="language-toml">
[index.fields]
  title = {
    selector = ["h1#post-title", "h1"]
  }
</pre>
<p>
Extracted metadata can be rendered on pages using a built-in <a href="http://tategakibunko.github.io/jingoo/">template processor</a> or an external script.
You can also export it to a JSON file for further processing.
</p>

<h2>Ready to start?</h2>
<p>Read a step by step tutorial to see what it's like.</p>
<ul>
  <li>If you already have a website: how to use soupault as an <a href="/getting-started-html-processor">HTML processor</a>.</li>
  <li>If you are starting a new site: run <code>soupault --init</code> in an empty directory and read the generated <code>soupault.conf</code> file,
      it's pretty detailed and well-commented.</li>
</ul>
<p>
You can also browse the <a href="https://github.com/dmbaturin/soupault-website">source</a> of this website and play with it,
or check out websites of other <a href="/users">soupault users</a>.
</p>
<p>
Then read the <a href="/reference-manual">reference manual</a> for details.
There's also a <a href="/blog">blog</a> and a section with <a href="/tips-and-tricks">tips and tricks</a>.
</p>

<h2 id="downloads">Download and install</h2>
<p>The simplest way to start using soupault is to download a prebuilt executable. Just unpack the archive and you are ready to go.</p>
<p>Downloads:</p>
<dl>
  <dt>Linux (x86-64)<fn id="linux-musl">Before you have a chance to interject for a moment,
      I'll say that it's linked statically with <a href="https://www.musl-libc.org/">musl</a>, so it will work on any Linux-based OS,
      not just GNU/Linux.</span></dt>
  <dd><soupault-release platform="linux-x86_64" />
  <dt>Microsoft Windows (64-bit)</dt>
  <dd><soupault-release platform="win64" /></dd>
  <dt>macOS</dt>
  <dd><soupault-release platform="macos-x86_64" /></dd>
</dl>
<p>You can verify digital signatures using this public key: <code>RWRfW+gkhk/+iA7dOUtTio6G6KeJCiAEp4Zfozw7eqv2shN90+5z20Cy</code></p>
<p>
Soupault uses <a href="https://jedisct1.github.io/minisign/">minisign</a> for release signing. To learn about its advantages
over GPG, read <a href="https://www.openbsd.org/papers/bsdcan-signify.html">signify: Securing OpenBSD From Us To You</a>.
One obvious advantage is that you don't need to import the key anywhere, you can pass it as a command line argument:
</p>
<pre>
minisign -Vm soupault-2.3.0-win32.zip -P RWRfW+gkhk/+iA7dOUtTio6G6KeJCiAEp4Zfozw7eqv2shN90+5z20Cy
</pre>
<p>
Soupault is free software published under the <a href="https://mit-license.org/">MIT license</a>. You can build it from source for any
platform supported by the <a href="https://ocaml.org">OCaml</a> programming language and contribute to it.
The source code is available from <a href="https://github.com/dmbaturin/soupault">github.com/dmbaturin/soupault</a>.
</p>
<p>
If you already have OCaml and <a href="https://opam.ocaml.org">opam</a> installed, you can also install from the opam repository:
<code>opam install soupault</code>.
</p>
<p>
If you want CDNed links for your <a href="/tips-and-tricks/deployment/">CI scripts</a>, you can use [GitHub releases](https://github.com/dmbaturin/soupault/releases).
</p>

<h2>Why it's named soupault?</h2>
<p>
Soupault is named after the French dadaist and surrealist writer <wikipedia>Philippe Soupault</wikipedia>
because it's based on the <github project="aantron/lambdasoup">lambdasoup</github> library.
Its development is sponsored by the <a href="http://www.college-de-pataphysique.org/">College of 'Pataphysics</a>.<fn id="pataphysics">Not really.</span>
</p>

<h2>Graphics</h2>
<p>
Soupault logo is a stick horse. It's a reference to the meeting where Philippe Soupault et al. chose a name for their movement by opening a dictionary
at a random word and landed on &ldquo;dada (n.), a colloquial for a stick horse&rdquo;, which is why they named it &ldquo;dadaism&rdquo;.
</p>
<img src="/images/soupault_logo.svg" width="128" height="128"/>
<img src="/images/powered_by_soupault_88x31.png" />

<img src="/images/soupault_logo_alt.png" />
<img src="/images/powered_by_soupault_88x31_alt.png" />

<p>If you are using soupault for your site or want to raise awareness of it, feel free to put a button there.</p>

<h2>Who's behind it?</h2>
<p>
So far just me, <a href="https://baturin.org">Daniil Baturin</a>, but everyone is welcome to send a patch/pull request or a suggestion.
It has grown out of the bunch of ad hoc scripts that used to power my own website, and then I thought I can as well make it usable
for everyone who finds other generators too annoying or too limiting.
</p>
<p>
Feel free to <a href="/contact">contact</a> me.
</p>

<hr>
