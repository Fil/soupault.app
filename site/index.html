<p>Soupault (<em>soup-oh</em>) is a static website generator and HTML processor.</p>
<p>
Its distinctive feature is that it works with your page <em>HTML element tree</em> rather than <em>text</em>,
so it can manipulate pages in ways many other tools can't.
</p>
<dl>
<dt><strong>You don't need to change anything in the website to start using it</strong></dt>
<dd>All control flow is defined in a configuration file. The &ldquo;template&rdquo; (which is optional anyway) is just a page with some elements left empty.</dd>
<dt><strong>It can automatically manipulate pages regardless of their layout</strong></dt>
<dd>
For example, insert a table of contents before the first <code>&lt;h1&gt;</code>, or into a <code>&lt;div id="toc"&gt;</code>. 
Targets for HTML manipulation rules are specified with CSS selectors.
</dd>
<dt><strong>It can extract metadata from pages</strong></dt>
<dd>There is no &ldquo;front matter&rdquo;. Instead, you tell soupault what to extract using CSS selectors again.</dd>
</dl>
<p>
This makes soupault equally suitable for uniform Web 2.0 style websites and free-form Web 1.0 websites with lots of unique pages.
You can also use it to enhance an existing website, whether it's handwritten or generated by another tool.
</p>

<p>These are some of the things it can do for you:</p>
<ul>
  <li>Assemble a complete website from a template (an empty page) and a directory with page body files.</li>
  <li>Insert files, HTML snippets, or output of external programs into your pages.</li>
  <li>Create a table of contents from the page headings.</li>
  <li>Create footnotes.</li>
  <li>Automatically call convertors from other formats (Markdown etc.) to HTML.</li>
  <li>Delete unwanted elements.</li>
</ul>

<h2>Static website generator</h2>
<p>
As a static site generator, it can help you build a complete website from a template (an empty page)
and a directory with page body files.
</p>
<p>
Its output is a completely static website in every possible sense: it needs no database etc. on the server side,
and it also needs no client-side JavaScript (unless you add your own JavaScript of course).
This ensures your site is fast, secure, accessible, and can be hosted anywhere for free or at a low cost.
</p>
<p>
You can easily change the site design by editing the template and rebuilding the site. It's also easy to
move reusable bits to separate files (like headers, footers, navigation menus and so on) and include them
in every page.
</p>
<p>
Unlike other generators, soupault doesn't limit you to all pages looking the same. You can add pages with
unique layouts, and still have them processed, rather than treated as static assets. You can also opt out from templating completely and use soupault as a postprocessor
for an existing website.
</p>

<h2>HTML processor</h2>
<p>
Soupault can also work as an HTML processor for existing pages, whether they are handwritten or generated
by another tool. You can enhance your site with tables of contents, inject a viewport meta tag,
or do something else to every page, even if they are all unique.
</p>
<p>
All features are available in both website generator and HTML processor modes, so you don't have to edit
any pages to start automating tedious tasks. 
</p>
<p>
Soupault decides whether to work like a website generator or an HTML processor
by checking if a page file has an <code>&lt;html&gt;</code> element in it. If it does not,
then it first assembles a complete page from that file and the template. If it does, then it knows
the page is already complete and only applies HTML transormation actions, like generating a table of contents.
</p>
<p>
This way you can mix templated and unique pages easily.
</p>

<h2>How it's different from other tools?</h2>
<h3>Based on HTML rewriting</h3>
<p>
Website generators like Jekyll or Hugo <em>generate</em> HTML by filling the blanks in a template. Soupault parses HTML and then <em>transforms and enhances</em> it.
It's conceptually similar to DOM manipulation with client-side JavaScript, only it produces static pages that will work even with JS disabled.
</p>
<p>
The &ldquo;template&rdquo; is really just an HTML page with some elements left empty.
Instead of inserting template tags like <code>{{content}}</code> in your page, you tell soupault how to find target elements using CSS selectors, like <code>body</code>, <code>.footnote</code>, or <code>div#content</code>.
So, if you have ever written a CSS stylesheet or worked with functions like <code>$()</code> from jQuery or <code>Document.querySelector()</code> from vanilla JS,
you already know the syntax.
<p>
It allows you to do things that are impossible with tools based on template processors. For example, you can insert the content of <code>header.html</code> before the first element
in the page <code>&lt;body&gt;</code> and <code>footer.html</code> after the last element. Or insert the table of contents into a <code>&lt;div id="toc"&gt;</code>
even if it's in a different place in every page. Or set the page title to the content of the first <code>&lt;h1&gt;</code> element.
</p>
<p>For example, this config snippet will insert the content of <code>includes/footer.html</code> inside the <code>&lt;div id="footer"&gt;</code> element of every page:</p>
<pre>
[widgets.insert-footer]
  widget = "include"
  selector = "div#footer"
  file = "includes/footer.html"
</pre>

<h3>No forced Markdown</h3>
<p>
The only format soupault uses internally is HTML. However, you can configure it
to automatically <a href="/howto/#preprocessors">convert</a> your files to HTML before further processing.
</p>
<p>
Whether you are a fan of a particular Markdown flavor, reStructuredText, or anything else, you can use it if you install
a convertor. You can also use multiple formats and convertors at once.
</p>

<h3>Native and fast, but extensible</h3>
<p>
Many generators are extensible with plugins but require a Ruby/Python/JS interpreter and runtime. Hugo is a static executable
that is fast and trivial to install, but it's not extensible.<span class="footnote" id="hugo-plugins">Its template language is Turing complete,
and the selection of built-ins is quite large, so the issue is more nuanced.</span>
With soupault you can have both.
</p>
<p>
It's available as a native, standalone executable (~6MB) for Linux, Windows, and macOS
that can be installed just by copying, and isn't going to stop working in newer operating system versions.
</p>
<p>
Soupault is quite fast and can build a moderate size website in under a second.
</p>
It's also extensible with Lua <a href="/plugins">plugins</a>.<span class="footnote" id="lua-2.5">The only pitfall is that the language is Lua 2.5, not modern Lua 5.x. That's because
soupault uses a research implementation called Lua-ML that made some embedded intepreter design breakthroughs, but sadly isn't up to date with Lua standards.</span>
Plugins have full access to the element tree of the page, much like JavaScript, but without a browser.
</p>

<h3>No external metadata needed</h3>
<p>Classic website generators store page metadata in a &ldquo;front matter&rdquo;â€”a machine-readable header placed before the page content.</p>
<p>
Soupault doesn't need it because it can extract metadata from the HTML itself, again using CSS selectors. For example, you can create a simple blog feed
from existing pages using the <code>&lt;h1&gt;</code> element for the post title and the first <code>&lt;p&gt;</code> for the excerpt.
See this post for a <a href="/blog/blogs-and-section-indices/">simple blog recipe</a>.
</p>
<p>
You can also define custom fields and export the entire site index to JSON for processing by external scripts.
</p>

<h2>Want to see it in action?</h2>
<p>Here's a screencast of basic usage:</p>
<div> <script id="asciicast-271350" src="https://asciinema.org/a/271350.js" async></script> <br /></div>
<p>
You can also download the <a href="https://github.com/dmbaturin/soupault.neocities.org">source</a> of this website and play with it.
</p>

<h2 id="downloads">Download and install</h2>
<p>The installation procedure is simple: just unpack the archive and you are ready to go.</p>
<p>Downloads:</p>
<dl>
  <dt>Linux (x86-64, statically linked)</dt>
  <dd><a href="https://files.baturin.org/software/soupault/1.5/soupault-1.5-linux-x86_64.tar.gz">soupault-1.5-linux-x86_64.tar.gz</a></dd>
  <dt>Microsoft Windows (7 and newer, 32-bit)</dt>
  <dd><a href="https://files.baturin.org/software/soupault/1.5/soupault-1.5-win32.zip">soupault-1.5-win32.zip</a></dd>
  <dt>macOS</dt>
  <dd><a href="https://files.baturin.org/software/soupault/1.5/soupault-1.5-macos.tar.gz">soupault-1.5-macos.tar.gz</a></dd>
</dl>
<p>
Soupault is free software published under the <a href="https://mit-license.org/">MIT license</a>. You can build it from source for any
platform supported by the <a href="https://ocaml.org">OCaml</a> programming language and contribute to it.
The source code is available from <a href="https://github.com/dmbaturin/soupault">github.com/dmbaturin/soupault</a>.
</p>

<h2>How to use it?</h2>
<p>
The <a href="/howto">HOWTO</a> should be a good start. Then read the <a href="/reference-manual">reference manual</a> for details.
There's also a <a href="/blog">blog</a> with tips and tricks.
</p>

<h2>Why it's named soupault?</h2>
<p>
Soupault is named after the French dadaist and surrealist writer Philippe Soupault
because it's based on the <a href="https://github.com/aantron/lambdasoup">lambdasoup</a> library.
Its development is sponsored by the <a href="http://www.college-de-pataphysique.org/">College of 'Pataphysics</a>.<span class="footnote" id="pataphysics">Not really.</span>
</p>

<h2>Graphics</h2>
<p>
The soupault logo is a stick horse. It's a reference to the meeting where Philippe Soupault et al. chose a name for their movement by opening a dictionary
at a random word and landed on &ldquo;dada (n.), a colloquial for a stick horse&rdquo;, which is why they named it &ldquo;dadaism&rdquo;.
</p>
<img src="/images/soupault_stick_horse.png" />
<img src="/images/powered_by_soupault.png" />
<img src="/images/powered_by_soupault_88x31.png" />

<p>If you are using soupault for your site or want to raise awareness of it, feel free to put a button there.</p>

<h2>Who's behind it?</h2>
<p>
So far just me, <a href="https://baturin.org">Daniil Baturin</a>, but everyone is welcome to send a patch/pull request or a suggestion.
It has grown out of the bunch of ad hoc scripts that used to power my own website, and then I thought I can as well make it usable
for everyone who finds other generators too annoying or too limiting.
</p>
<p>
Feel free to <a href="/contact">contact</a> me.
</p>
